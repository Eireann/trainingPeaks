{{#hoverBox this "leftarrow"}}

<div id="closeIcon" />
<h3 class="subheadbold planTitle">{{ title }}</h3>
{{# with details }}
<div class="planInfo">
    <div class="small">{{$ "By"}}</div>
    <div class="authorName small">{{ author }},</div>
    <div class="planDuration small">12 weeks</div>
    <div class="planId small">{{$ "ID"}} {{ planId }}</div>
</div>

<div class="planDescription small">{{ stripHtml description 200 }}</div>


<div class="planDetails">
    <div class="smallbold">Weekly Averages</div>
    <div class="smallbold">{{$ "Duration"}}</div>
    <div class="smallbold">{{$ "Distance"}}</div>
</div>
<div class="durationDetails">
    {{#each plannedWorkoutTypeDurations}}
    <div class="plannedWorkoutTypes">
        <span class="small workoutType">{{ workoutTypeName workoutTypeId }}</span>
        <span class="small duration">{{ conversion "formatDuration" duration this "0:00" }}</span>
        <span class="small distance">{{ distance }}</span>
    </div>
    {{/each}}
</div>

<div class="applyPlan">
    <div class="smallbold">{{$ "ApplyPlan"}}</div>
</div>
{{/with}}
{{#if applyable }}
<div class="startEndPlan">
    <select id="applyDateType">
        <option value="1">{{$ "Start" }}</option>
        <option value="3">{{$ "End" }}</option>
        {{# with details }}
            {{#if eventPlan }}
                <option value="2">{{$ "EndOnEventDate" }}</option>
            {{/if}}
        {{/with}}
    </select>
    <span class="small on">{{$ "on" }}</span>
    <input type="text" id="applyDate" class="datepicker" value="{{ formatDate applyDate "MM/DD/YYYY" }}">

    {{#if applied }}
    <button class="apply">{{$ "Reapply" }}</button>
    {{ else }}
    <button class="apply">{{$ "Apply" }}</button>
    {{/if}}
</div>
{{/if}}


{{# with details }}
{{#if planApplications }}
    <div class="appliedPlans">
        <div class="smallbold">{{$ "AppliedPlans"}}</div>
        <div class="appliedPlansContainer">
            {{# each planApplications }}
                <div data-appliedplanid="{{ appliedPlanId }}" class="appliedPlan">
                    <input type="radio" name="appliedPlan" value="{{ appliedPlanId }}">
                    <span class="appliedDates small">{{ formatDate startDate "MM/DD/YYYY" }} - {{ formatDate endDate "MM/DD/YYYY" }}</span>
                    <select class="alterAppliedPlan">
                        <option value="edit">{{$ "Edit" }}</option>
                        <option value="move">{{$ "Move" }}</option>
                        <option value="unapply">{{$ "Unapply" }}</option>
                    </select>
                </div>
            {{/each}}
{{/if}}
        </div>
    </div>
{{/with}}

{{/hoverBox}}