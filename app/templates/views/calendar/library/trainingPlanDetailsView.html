{{#hoverBox this "leftarrow"}}

<div id="closeIcon" />
<h3 class="subheadbold planTitle">{{ title }}</h3>
{{# with details }}
<div class="planInfo">
    <div class="small">{{$ "By"}} {{ author }}, {{ weekcount }} weeks</div>
    <div class="planId small">{{$ "ID"}} {{ planId }}</div>
</div>

<div class="planDescription small">{{ stripHtml description 200 }}</div>


<div class="planDetails">
    <div class="smallbold">Weekly Averages</div>
    <div class="smallbold">{{$ "Duration"}}</div>
    <div class="smallbold">{{$ "Distance"}}</div>
</div>
<div class="durationDetails">
    {{#each plannedWorkoutTypeDurations}}
    <div class="plannedWorkoutTypes">
        <span class="small workoutType">{{ workoutTypeName workoutTypeId }}</span>
        <span class="small duration">{{#if duration}}{{ conversion "formatHours" duration this "NA" }} hrs{{ else }}NA{{/if}}</span>
        <span class="small distance">{{#if distance}}{{ conversion "formatDistance" distance this "NA"}} {{ getUnitsLabel "distance" workoutTypeId this }}{{ else }}NA{{/if}}</span>
    </div>
    {{/each}}
</div>

<div class="applyPlan">
    <div class="smallbold">{{$ "ApplyPlan"}}</div>
</div>
{{/with}}

{{#if applyable }}
<div class="startEndPlan">
    <select id="applyDateType">
        <option value="1">{{$ "Start" }}</option>
        <option value="3">{{$ "End" }}</option>
        {{# with details }}
            {{#if eventPlan }}
                <option value="2">{{$ "EndOnEventDate" }}</option>
            {{/if}}
        {{/with}}
    </select>
    <span class="small on">{{$ "on" }}</span>
    <input type="text" id="applyDate" class="datepicker" value="{{ formatDate applyDate "MM/DD/YYYY" }}">
    <button class="apply">{{$ "Go" }}</button>
</div>
{{/if}}

{{#if applied}}
    {{# with details }}
        {{#if planApplications }}
            <div class="appliedPlans">
                <div class="smallbold">{{$ "AppliedPlans"}}</div>
                <div class="appliedPlansContainer">
                    {{# each planApplications }}
                        <div data-appliedplanid="{{ appliedPlanId }}" class="appliedPlan">
                            {{#comment}}<input type="radio" name="appliedPlan" value="{{ appliedPlanId }}" />{{/comment}}
                            <span class="appliedDates small">{{ formatDate startDate "MM/DD/YYYY" }} - {{ formatDate endDate "MM/DD/YYYY" }}</span>
                            <label class="removePlan">{{$ "Remove" }}</label>
                            {{#comment }}
                            <select class="alterAppliedPlan">
                                <option value="select">{{$ "Select" }}</option>
                                <option value="move">{{$ "Move" }}</option>
                                <option value="unapply">{{$ "Unapply" }}</option>
                            </select>
                            {{/comment}}
                            {{#comment}}
                            <div class="startEndPlan optionsDisabled">
                                <select class="applyDateType">
                                    <option value="1">{{$ "Start" }}</option>
                                    <option value="3">{{$ "End" }}</option>
                                    {{#if eventPlan }}
                                        <option value="2">{{$ "EndOnEventDate" }}</option>
                                    {{/if}}
                                </select>
                                <span class="small on">{{$ "on" }}</span>
                                <input type="text" class="applyDate" class="datepicker" value="{{ formatDate applyDate "MM/DD/YYYY" }}">
                                <button class="apply">{{$ "Move" }}</button>
                            </div>
                            {{/comment}}
                        </div>
                    {{/each}}
                </div>
            </div>
        {{/if}}
    {{/with}}
{{/if}}

{{/hoverBox}}