{{#hoverBox this "leftarrow"}}

<div id="closeIcon" />
<h3 class="subheadbold planTitle">{{ title }}</h3>
{{# with details }}
<div class="planInfo">
    <div class="small authorInfo" >{{$ "By"}} {{ author }}, {{ weekcount }} weeks</div>
    <div class="planId small">{{$ "ID"}} {{ planId }}</div>
</div>

{{#if descriptionShort }}
    <div class="planDescription small">{{descriptionShort}} <div class="more small">{{$ "More"}}</div></div>
{{else}}
    <div class="planDescription small">{{descriptionText}}</div>
{{/if}}


{{#if plannedWorkoutTypeDurations }}
<div class="planDetails">
    <div class="smallbold">{{$ "WorkoutTotals" }}</div>
    <div class="smallbold duration">{{$ "Duration"}}</div>
    <div class="smallbold distance">{{$ "Distance"}}</div>
</div>
<div class="durationDetails">
    {{#each plannedWorkoutTypeDurations}}
        {{#everyOther @index 2}}
            <div class="plannedWorkoutTypes highlightRow">
                <span class="small workoutType">{{ workoutTypeName workoutTypeId }}</span>
                <span class="small duration">{{#if duration}}{{ conversion "formatHours" duration this "NA" }} hrs{{ else }}NA{{/if}}</span>
                <span class="small distance">{{#if distance}}{{ conversion "formatDistance" distance this "NA"}} {{ getUnitsLabel "distance" workoutTypeId this }}{{ else }}NA{{/if}}</span>
            </div>
        {{else}}
            <div class="plannedWorkoutTypes">
                <span class="small workoutType">{{ workoutTypeName workoutTypeId }}</span>
                <span class="small duration">{{#if duration}}{{ conversion "formatHours" duration this "NA" }} hrs{{ else }}NA{{/if}}</span>
                <span class="small distance">{{#if distance}}{{ conversion "formatDistance" distance this "NA"}} {{ getUnitsLabel "distance" workoutTypeId this }}{{ else }}NA{{/if}}</span>
            </div>
        {{/everyOther}}
    {{/each}}
</div>
{{/if}}
{{/with}}

{{#if applyable }}
<div class="applyPlan">
    <div class="smallbold">{{$ "ApplyPlan"}}</div>
</div>
<div class="startEndPlan">
    <div class="selectBoxWrapper">
        <select id="applyDateType" class="dateOptions"> 
            {{# with details }}
                {{#if eventPlan }}
                    {{#ifNot forceDate}}
                        <option value="1">{{$ "Start" }}</option>
                        <option value="3">{{$ "End" }}</option>
                    {{/ifNot}}
                    <option value="2">{{$ "EndOnEventDate" }}</option>
                {{ else }}
                    <option value="1">{{$ "Start" }}</option>
                    <option value="3">{{$ "End" }}</option>
                {{/if}}
            {{/with}}
        </select>
    </div>
    <span class="small on">{{$ "on" }}</span>
    <input type="text" id="applyDate" class="datepicker" value="{{ formatDate applyDate "MM/DD/YYYY" }}" readonly>
    <button class="apply">{{$ "Go" }}</button>
</div>
{{/if}}

{{#with details}}
    {{#if planApplications }}
        <div class="appliedPlans">
            <div class="smallbold">{{$ "AppliedPlans"}}</div>
            <div class="appliedPlansContainer">
                {{# each planApplications }}
                    <div data-appliedplanid="{{ appliedPlanId }}" class="appliedPlan">
                        <span class="appliedDates small">{{$ "OnCalendarFrom" }} {{ formatDate startDate "M/D/YYYY" }} {{$ "to" }} {{ formatDate endDate "M/D/YYYY" }}</span>
                        <span class="removePlan small">{{$ "Remove" }}</span>
                    </div>
                {{/each}}
            </div>
        </div>
    {{/if}}
{{/with}}
{{/hoverBox}}